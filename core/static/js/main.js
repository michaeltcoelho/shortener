var shortener={el:{input:$("input#url"),btn:$("button#short"),content:$("#shortened"),table:$("#link-table tbody")},init:function(){shortener.el.btn.on("click",shortener.shorten),shortener.el.input.on("keyup",function(){shortener.el.input.removeClass("field-error")})},shorten:function(e){e.preventDefault();var t=shortener.el.input.val();t?$.get("/shorten/",{url:t},function(e){e.error?toastr.error(e.error.url,"Informação incorreta..."):(shortener.el.content.html(shortener.html(e)),e.created&&shortener.el.table.append(shortener.row(e)))}):shortener.el.input.addClass("field-error").focus()},html:function(e){return $('<div id="url-shortened"><div class="url"><span>Copie sua url encurtada: </span><a href="'+e.shortened_url+'">'+e.shortened_url+"</a></div></div>")},row:function(e){return $('<tr><td class="text-left"><a href="'+e.shortened_url+'" class="link">'+e.shortened_url+'</a></td><td class="text-align">'+e.submitted+'</td><td class="text-center">'+e.visits+"</td></tr>")}};$(function(){shortener.init()});